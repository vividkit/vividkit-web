---
import { Workflow, Clock, List, ArrowRight, Zap, Bug, Rocket, Palette } from 'lucide-astro';
import { landingWorkflows, workflowsHeroContent } from '@/data/guides/workflows-landing';

const levelBadgeClasses: Record<string, string> = {
  beginner: 'skill-badge--beginner',
  intermediate: 'skill-badge--intermediate',
  advanced: 'skill-badge--advanced'
};

const iconMap: Record<string, any> = {
  'feature-development': Zap,
  'bug-fixing': Bug,
  'project-bootstrap': Rocket,
  'design-implementation': Palette
};
---

<section id="workflows" class="section py-24 bg-gradient-to-b from-transparent to-purple-500/5">
  <div class="max-w-6xl mx-auto px-6">

    <!-- Section Header -->
    <div class="text-center mb-16 fade-in-up">
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-purple-500/10 border border-purple-500/20 mb-6">
        <Workflow class="w-5 h-5 text-purple-500" />
        <span class="text-sm font-medium text-purple-600 dark:text-purple-400">Proven Patterns</span>
      </div>
      <h2 class="text-4xl md:text-5xl font-bold text-slate-900 dark:text-white mb-4 font-heading">
        {workflowsHeroContent.title}
      </h2>
      <p class="text-xl text-slate-600 dark:text-slate-400 max-w-3xl mx-auto mb-6">
        {workflowsHeroContent.description}
      </p>

      <!-- Pro Tip Banner -->
      <div class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500/10 border border-amber-500/20">
        <Zap class="w-4 h-4 text-amber-500" />
        <span class="text-sm text-amber-600 dark:text-amber-400">{workflowsHeroContent.highlight}</span>
      </div>
    </div>

    <!-- Workflow Grid -->
    <div class="grid md:grid-cols-2 gap-6 mb-12">
      {landingWorkflows.map((workflow, index) => {
        const IconComponent = iconMap[workflow.id] || Workflow;
        return (
          <div
            class={`workflow-card border ${workflow.borderColor} fade-in-up`}
            style={`animation-delay: ${0.1 + index * 0.1}s`}
          >
            <!-- Header -->
            <div class={`workflow-card-header ${workflow.gradient}`}>
              <div class="flex items-start justify-between">
                <div class="flex items-center gap-3">
                  <div class={`w-10 h-10 rounded-lg bg-white/10 dark:bg-surface-900/50 flex items-center justify-center`}>
                    <IconComponent class={`w-5 h-5 ${workflow.iconColor}`} />
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-slate-900 dark:text-white">
                      {workflow.title}
                    </h3>
                    <p class="text-sm text-slate-600 dark:text-slate-400 mt-1">
                      {workflow.description}
                    </p>
                  </div>
                </div>
                <span class={`skill-badge ${levelBadgeClasses[workflow.level]}`}>
                  {workflow.level}
                </span>
              </div>
            </div>

            <!-- Body -->
            <div class="workflow-card-body">
              <!-- Meta info -->
              <div class="flex items-center gap-4 text-sm text-slate-600 dark:text-slate-400 pb-3 border-b border-slate-200 dark:border-slate-800">
                <span class="flex items-center gap-1">
                  <Clock class="w-4 h-4" />
                  {workflow.duration}
                </span>
                <span class="flex items-center gap-1">
                  <List class="w-4 h-4" />
                  {workflow.stepCount} steps
                </span>
              </div>

              <!-- Steps -->
              <ol class="space-y-3 mt-4">
                {workflow.steps.map((step, stepIndex) => (
                  <li class="flex items-start gap-3">
                    <span class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-xs font-medium text-slate-600 dark:text-slate-400">
                      {stepIndex + 1}
                    </span>
                    <div class="flex-1 flex items-center gap-2 flex-wrap">
                      <code class="px-2 py-1 bg-slate-100 dark:bg-slate-800 rounded text-xs font-mono text-slate-700 dark:text-slate-300">
                        {step.command}
                      </code>
                      <span class="text-sm text-slate-600 dark:text-slate-400">
                        {step.description}
                      </span>
                    </div>
                  </li>
                ))}
              </ol>
            </div>
          </div>
        );
      })}
    </div>

    <!-- Visual Flow Diagram (Simplified) -->
    <div class="glass-card rounded-xl p-8 mb-12 fade-in-up" style="animation-delay: 0.5s">
      <h3 class="text-xl font-semibold text-slate-900 dark:text-white mb-6 text-center">
        From Idea to Code in 3 Steps
      </h3>
      <div class="flex items-center justify-center gap-4 flex-wrap">
        <div class="text-center">
          <div class="w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mx-auto mb-2">
            <span class="text-2xl">üí°</span>
          </div>
          <span class="text-sm text-slate-600 dark:text-slate-400">Idea</span>
        </div>

        <ArrowRight class="w-6 h-6 text-slate-400 flow-arrow" />

        <div class="text-center">
          <div class="w-16 h-16 rounded-full bg-blue-500/20 flex items-center justify-center mx-auto mb-2">
            <span class="text-2xl">üìù</span>
          </div>
          <span class="text-sm text-slate-600 dark:text-slate-400">Plan</span>
        </div>

        <ArrowRight class="w-6 h-6 text-slate-400 flow-arrow" style="animation-delay: 0.3s" />

        <div class="text-center">
          <div class="w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-2">
            <span class="text-2xl">üíª</span>
          </div>
          <span class="text-sm text-slate-600 dark:text-slate-400">Code</span>
        </div>
      </div>
    </div>

    <!-- CTA -->
    <div class="text-center fade-in-up" style="animation-delay: 0.6s">
      <a
        href="/guides#workflows"
        class="cta-button inline-flex items-center gap-2 px-8 py-4 text-white rounded-xl font-semibold text-lg"
      >
        Explore All Workflows
        <ArrowRight class="w-5 h-5" />
      </a>
    </div>

  </div>
</section>