---
import { useTranslations } from '@/i18n/utils';
import { getLangFromUrl, type Language } from '@/i18n';

const { lang } = Astro.props;
const currentLang = lang || getLangFromUrl(Astro.url);
const t = useTranslations(currentLang);
---
---

<style>
  @keyframes flow {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }
  .flow-arrow {
    animation: flow 2s ease-in-out infinite;
  }
</style>

<div class="space-y-8 mt-6">
  <!-- Page Header -->
  <div class="text-center space-y-4">
    <h2 class="text-4xl font-bold text-slate-900 dark:text-white tracking-tight">
      {t('resume.guide.title')}
    </h2>
    <p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed" set:html={t('resume.guide.subtitle')}>
    </p>
  </div>

  <!-- Hero Banner -->
  <div class="flex items-start gap-4 p-6 rounded-xl bg-fuchsia-500/5 dark:bg-fuchsia-500/10 border border-fuchsia-200 dark:border-fuchsia-500/20">
    <div class="flex-shrink-0 w-10 h-10 rounded-full bg-fuchsia-100 dark:bg-fuchsia-500/20 flex items-center justify-center">
      <svg class="w-5 h-5 text-fuchsia-600 dark:text-fuchsia-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9h-2c0 3.86-3.14 7-7 7s-7-3.14-7-7 3.14-7 7-7v4l6-5-6-5v4z"/>
      </svg>
    </div>
    <div class="flex-1">
      <div class="font-bold text-fuchsia-700 dark:text-fuchsia-400 mb-1 text-lg">{t('resume.guide.why_title')}</div>
      <div class="text-slate-600 dark:text-slate-400 leading-relaxed">
        {t('resume.guide.why_desc_1')}
        <span set:html={t('resume.guide.why_desc_2')} />
      </div>
    </div>
  </div>

  <!-- Step-by-Step Guide -->
  <div class="space-y-6">
    <h3 class="text-2xl font-bold text-slate-900 dark:text-white">{t('resume.guide.how_to_title')}</h3>

    <!-- Step 1 -->
    <div class="bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
      <div class="p-6 bg-gradient-to-r from-slate-500/10 to-slate-600/10 border-b border-slate-100 dark:border-slate-800">
        <div class="flex items-center gap-3">
          <div class="flex items-center justify-center w-8 h-8 rounded-full bg-slate-500/20 text-slate-600 dark:text-slate-400 font-bold text-sm">1</div>
          <h4 class="text-lg font-bold text-slate-900 dark:text-slate-100">{t('resume.guide.step1.title')}</h4>
        </div>
      </div>
      <div class="p-6">
        <p class="text-slate-600 dark:text-slate-400 mb-4">
          {t('resume.guide.step1.desc')}
        </p>
        <div class="bg-slate-950 rounded-lg p-4 font-mono text-sm text-slate-300 overflow-x-auto">
          <div class="flex items-center gap-2 mb-2 text-slate-300">
            <span class="text-slate-500 select-none">$</span>
            <span class="select-all">cat ~/.claude/history.jsonl</span>
          </div>
          <div class="text-slate-500 italic">{t('resume.guide.step1.comment')}</div>
          <div class="mt-2 text-green-400 font-mono text-xs break-all">
            {`{"display":"/clear ","timestamp":1765163522956,"project":"...","sessionId":"`}<span class="bg-yellow-500/30 text-yellow-200 px-1 rounded">74f292c0-49fa-41c0-a2d8-dd2c3ef9c4be</span>{`"}`}
          </div>
        </div>
        <div class="mt-4 text-sm text-slate-500 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-800">
          ðŸ’¡ <strong>{t('resume.guide.step1.tip_label')}</strong> <span set:html={t('resume.guide.step1.tip_text')} />
        </div>
      </div>
    </div>

    <!-- Step 2 -->
    <div class="bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
      <div class="p-6 bg-gradient-to-r from-fuchsia-500/10 to-pink-500/10 border-b border-slate-100 dark:border-slate-800">
        <div class="flex items-center gap-3">
          <div class="flex items-center justify-center w-8 h-8 rounded-full bg-fuchsia-500/20 text-fuchsia-600 dark:text-fuchsia-400 font-bold text-sm">2</div>
          <h4 class="text-lg font-bold text-slate-900 dark:text-slate-100">{t('resume.guide.step2.title')}</h4>
        </div>
      </div>
      <div class="p-6">
        <p class="text-slate-600 dark:text-slate-400 mb-4" set:html={t('resume.guide.step2.desc')}>
        </p>
        <div class="bg-slate-950 rounded-lg p-4 font-mono text-sm text-slate-300 overflow-x-auto">
          <div class="flex items-center gap-2 mb-2 text-slate-300">
            <span class="text-slate-500 select-none">$</span>
            <div>
              <span class="select-all">ccs glm</span>
              <span class="text-slate-500 ml-2">{t('resume.guide.step2.comment_start')}</span>
            </div>
          </div>
          <div class="flex items-center gap-2 mb-2 text-slate-300">
            <span class="text-slate-500 select-none">&gt;</span>
            <span class="select-all">/resume <span class="text-yellow-400">74f292c0-49fa-41c0-a2d8-dd2c3ef9c4be</span></span>
          </div>
          <div class="text-slate-500 italic pl-4 mt-2">
            {t('resume.guide.step2.comment_context')}
          </div>
        </div>
      </div>
    </div>

    <!-- Step 3 -->
    <div class="bg-white dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden">
      <div class="p-6 bg-gradient-to-r from-pink-500/10 to-rose-500/10 border-b border-slate-100 dark:border-slate-800">
        <div class="flex items-center gap-3">
          <div class="flex items-center justify-center w-8 h-8 rounded-full bg-pink-500/20 text-pink-600 dark:text-pink-400 font-bold text-sm">3</div>
          <h4 class="text-lg font-bold text-slate-900 dark:text-slate-100">{t('resume.guide.step3.title')}</h4>
        </div>
      </div>
      <div class="p-6">
        <p class="text-slate-600 dark:text-slate-400 mb-4">
          {t('resume.guide.step3.desc')}
        </p>
        <div class="bg-slate-950 rounded-lg p-4 font-mono text-sm text-slate-300 overflow-x-auto">
          <div class="flex items-center gap-2 text-slate-300">
            <span class="text-slate-500 select-none">&gt;</span>
            <span class="select-all">continue</span>
          </div>
          <div class="pl-4 mt-2 border-l-2 border-slate-700">
            <div class="text-purple-400 text-xs mb-1">GLM Model</div>
            <p>{t('resume.guide.step3.ai_response')}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Benefits Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-8">
    <div class="p-4 rounded-xl bg-green-500/5 dark:bg-green-500/10 border border-green-200 dark:border-green-500/20">
      <h4 class="font-bold text-green-700 dark:text-green-400 mb-2 flex items-center gap-2">
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
        </svg>
        {t('resume.guide.benefit1.title')}
      </h4>
      <p class="text-sm text-slate-600 dark:text-slate-400">
        {t('resume.guide.benefit1.desc')}
      </p>
    </div>
    <div class="p-4 rounded-xl bg-blue-500/5 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/20">
      <h4 class="font-bold text-blue-700 dark:text-blue-400 mb-2 flex items-center gap-2">
        <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <polyline points="12 6 12 12 16 14"/>
        </svg>
        {t('resume.guide.benefit2.title')}
      </h4>
      <p class="text-sm text-slate-600 dark:text-slate-400">
        {t('resume.guide.benefit2.desc')}
      </p>
    </div>
  </div>
</div>
